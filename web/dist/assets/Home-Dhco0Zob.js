var B=(p,f,r)=>new Promise((c,d)=>{var g=m=>{try{h(r.next(m))}catch(k){d(k)}},u=m=>{try{h(r.throw(m))}catch(k){d(k)}},h=m=>m.done?c(m.value):Promise.resolve(m.value).then(g,u);h((r=r.apply(p,f)).next())});import{_ as E,r as w,c as i,F as $,a as I,o as l,b as o,d as L,t as x,n as D,w as V,e as z,f as H,g as j,h as W,i as J,T as K,j as O,k as P,l as Q,m as X,v as Y,p as Z,q as F,s as ee}from"./index-BSD0j5mj.js";import{g as te,a as ne,b as oe,c as N}from"./api-BuqCV8Ig.js";const se={class:"menu-bar"},ae=["onMouseenter","onMouseleave"],le=["onClick"],ie=["onClick"],re={__name:"MenuBar",props:{menus:Array,activeId:Number,activeSubMenuId:Number},setup(p){const f=w(null);function r(d){f.value=d}function c(d){setTimeout(()=>{f.value===d&&(f.value=null)},100)}return(d,g)=>(l(),i("nav",se,[(l(!0),i($,null,I(p.menus,u=>(l(),i("div",{key:u.id,class:"menu-item",onMouseenter:h=>r(u.id),onMouseleave:h=>c(u.id)},[o("button",{onClick:h=>d.$emit("select",u),class:D({active:u.id===p.activeId})},x(u.name),11,le),u.subMenus&&u.subMenus.length>0?(l(),i("div",{key:0,class:D(["sub-menu",{show:f.value===u.id}])},[(l(!0),i($,null,I(u.subMenus,h=>(l(),i("button",{key:h.id,onClick:m=>d.$emit("select",h,u),class:D([{active:h.id===p.activeSubMenuId},"sub-menu-item"])},x(h.name),11,ie))),128))],2)):L("",!0)],40,ae))),128))]))}},ce=E(re,[["__scopeId","data-v-16a94230"]]),ue=["href","title"],de=["src","onError"],he={class:"link-text"},ve={__name:"CardGrid",props:{cards:Array},setup(p){const f=p,r=w(""),c=w("slideUp");V(()=>f.cards,(n,v)=>{n&&n.length>0&&(!v||v.length===0||JSON.stringify(n)!==JSON.stringify(v))&&H(()=>{d()})},{deep:!0,immediate:!1});function d(){const n=["slideUp","radial","fadeIn","slideLeft","slideRight","convergeIn","flipIn"],v=Math.floor(Math.random()*n.length);c.value=n[v],r.value=`animate-${c.value}`,setTimeout(()=>{r.value=""},1200)}function g(n){if(!r.value)return{};if(window.innerWidth<=480)return{animationDelay:"0s"};if(c.value==="slideUp")return{animationDelay:`${n*.05}s`};if(c.value==="radial"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=Math.floor(n/s),b=n%s,S=Math.floor(s/2);return{animationDelay:`${(Math.abs(b-S)+_)*.08}s`}}else{if(c.value==="fadeIn")return{animationDelay:`${Math.random()*.5}s`};if(c.value==="slideLeft"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6;return{animationDelay:`${Math.floor(n/s)*.1}s`}}else if(c.value==="slideRight"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=Math.floor(n/s),b=n%s;return{animationDelay:`${(_+(s-b-1)*.02)*.08}s`}}else if(c.value==="convergeIn"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=n%s,b=Math.floor(s/2),S=Math.abs(_-b);return{animationDelay:`${(s-S-1)*.08}s`}}else if(c.value==="flipIn"){const s=window.innerWidth<=768?3:window.innerWidth<=1200?4:6,_=Math.floor(n/s),b=n%s;return{animationDelay:`${(_+b)*.06}s`}}}return{}}function u(n){if(n.custom_logo_path)return"/uploads/"+n.custom_logo_path;if(n.logo_url)return n.logo_url;try{return new URL(n.url).origin+"/favicon.ico"}catch(v){return"/default-favicon.png"}}function h(n,v){n.target.src="/default-favicon.png"}function m(n){let v="";return n.desc&&(v+=n.desc+`
`),v+=n.url,v}function k(n){return n?n.length>20?n.slice(0,20)+"...":n:""}return(n,v)=>(l(),i("div",{class:D(["container card-grid",r.value])},[(l(!0),i($,null,I(p.cards,(s,_)=>(l(),i("div",{key:s.id,class:"link-item",style:z(g(_))},[o("a",{href:s.url,target:"_blank",title:m(s)},[o("img",{class:"link-icon",src:u(s),alt:"",onError:b=>h(b),loading:"lazy"},null,40,de),o("span",he,x(k(s.title)),1)],8,ue)],4))),128))],2))}},fe=E(ve,[["__scopeId","data-v-f81ac5a5"]]),ge={key:0,class:"loading-overlay"},me={class:"loading-spinner"},we={key:0,class:"loading-text"},pe={__name:"Loading",props:{show:{type:Boolean,default:!1},text:{type:String,default:"加载中..."}},setup(p){return(f,r)=>(l(),j(O,{to:"body"},[W(K,{name:"loading"},{default:J(()=>[p.show?(l(),i("div",ge,[o("div",me,[r[0]||(r[0]=o("div",{class:"spinner"},null,-1)),p.text?(l(),i("span",we,x(p.text),1)):L("",!0)])])):L("",!0)]),_:1})]))}},_e=E(pe,[["__scopeId","data-v-9263e8f5"]]),be={class:"home-container"},ye={class:"menu-bar-fixed"},ke={class:"search-section"},Me={class:"search-box-wrapper"},Ce={class:"search-engine-select"},$e=["onClick"],Ie={class:"search-container"},Le=["placeholder"],xe={key:0,class:"ad-space-fixed left-ad-fixed"},Se=["href"],Be=["src"],De={key:1,class:"ad-space-fixed right-ad-fixed"},Re=["href"],We=["src"],Ee={class:"footer"},Ne={class:"footer-content"},Te={class:"modal-header"},Ue={class:"modal-body"},qe={class:"friend-links-grid"},Ae=["href"],Fe={class:"friend-link-logo"},Ge=["src","alt"],Ve={key:1,class:"friend-link-placeholder"},ze={class:"friend-link-info"},He={__name:"Home",setup(p){const f=w([]),r=w(null),c=w(null),d=w([]),g=w(""),u=w([]),h=w([]),m=w(!1),k=w([]),n=w(!1),v=[{name:"google",label:"Google",placeholder:"Google 搜索...",url:e=>`https://www.google.com/search?q=${encodeURIComponent(e)}`},{name:"baidu",label:"百度",placeholder:"百度搜索...",url:e=>`https://www.baidu.com/s?wd=${encodeURIComponent(e)}`},{name:"bing",label:"Bing",placeholder:"Bing 搜索...",url:e=>`https://www.bing.com/search?q=${encodeURIComponent(e)}`},{name:"github",label:"github",placeholder:"GitHub 搜索...",url:e=>`https://github.com/search?q=${encodeURIComponent(e)}&type=repositories`},{name:"site",label:"站内",placeholder:"站内搜索...",url:e=>`/search?query=${encodeURIComponent(e)}`}],s=w(v[0]);function _(e){s.value=e}function b(){g.value=""}const S=P(()=>g.value?d.value.filter(e=>e.title.toLowerCase().includes(g.value.toLowerCase())||e.url.toLowerCase().includes(g.value.toLowerCase())):d.value);Q(()=>B(null,null,function*(){n.value=!0;try{const e=yield te();f.value=e.data,f.value.length&&(r.value=f.value[0],yield U())}catch(e){console.error("加载菜单失败:",e)}try{const e=yield ne();u.value=e.data.filter(t=>t.position==="left"),h.value=e.data.filter(t=>t.position==="right")}catch(e){console.error("加载广告失败:",e)}try{const e=yield oe();k.value=e.data}catch(e){console.error("加载友链失败:",e)}n.value=!1}));function T(e,t=null){return B(this,null,function*(){t?(r.value=t,c.value=e):(r.value=e,c.value=null),yield U()})}function U(){return B(this,null,function*(){var e;if(r.value){n.value=!0;try{const t=yield N(r.value.id,(e=c.value)==null?void 0:e.id);d.value=t.data}catch(t){console.error("加载卡片失败:",t)}finally{n.value=!1}}})}function q(){return B(this,null,function*(){if(g.value.trim())if(s.value.name==="site"){let e=!1;const t=g.value.toLowerCase();for(const y of f.value)try{const C=yield N(y.id);if(C.data.find(M=>M.title.toLowerCase().includes(t)||M.url.toLowerCase().includes(t)||M.desc&&M.desc.toLowerCase().includes(t))){r.value=y,c.value=null,d.value=C.data,e=!0;break}if(y.subMenus&&y.subMenus.length>0)for(const M of y.subMenus){const A=yield N(y.id,M.id);if(A.data.find(R=>R.title.toLowerCase().includes(t)||R.url.toLowerCase().includes(t)||R.desc&&R.desc.toLowerCase().includes(t))){r.value=y,c.value=M,d.value=A.data,e=!0;break}}if(e)break}catch(C){console.error("搜索出错:",C)}e||alert("未找到相关内容")}else{const e=s.value.url(g.value);window.open(e,"_blank")}})}function G(e){e.target.style.display="none";const t=e.target.parentElement.querySelector(".friend-link-placeholder");t&&(t.style.display="flex")}return(e,t)=>{var y,C;return l(),i("div",be,[W(_e,{show:n.value,text:"加载中..."},null,8,["show"]),o("div",ye,[W(ce,{menus:f.value,activeId:(y=r.value)==null?void 0:y.id,activeSubMenuId:(C=c.value)==null?void 0:C.id,onSelect:T},null,8,["menus","activeId","activeSubMenuId"])]),o("div",ke,[o("div",Me,[o("div",Ce,[(l(),i($,null,I(v,a=>o("button",{key:a.name,class:D(["engine-btn",{active:s.value.name===a.name}]),onClick:M=>_(a)},x(a.label),11,$e)),64))]),o("div",Ie,[X(o("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>g.value=a),type:"text",placeholder:s.value.placeholder,class:"search-input",onKeyup:Z(q,["enter"])},null,40,Le),[[Y,g.value]]),g.value?(l(),i("button",{key:0,class:"clear-btn",onClick:b,"aria-label":"清空",title:"clear"},t[5]||(t[5]=[o("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"2"},[o("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))):L("",!0),o("button",{onClick:q,class:"search-btn",title:"search"},t[6]||(t[6]=[o("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none"},[o("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])])]),u.value.length?(l(),i("div",xe,[(l(!0),i($,null,I(u.value,a=>(l(),i("a",{key:a.id,href:a.url,target:"_blank"},[o("img",{src:a.img,alt:"广告"},null,8,Be)],8,Se))),128))])):L("",!0),h.value.length?(l(),i("div",De,[(l(!0),i($,null,I(h.value,a=>(l(),i("a",{key:a.id,href:a.url,target:"_blank"},[o("img",{src:a.img,alt:"广告"},null,8,We)],8,Re))),128))])):L("",!0),W(fe,{cards:S.value},null,8,["cards"]),o("footer",Ee,[o("div",Ne,[o("button",{onClick:t[1]||(t[1]=a=>m.value=!0),class:"friend-link-btn"},t[7]||(t[7]=[o("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),o("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})],-1),F(" 友情链接 ")])),t[8]||(t[8]=o("p",{class:"copyright"},[F("Copyright © 2025 Nav-Item | "),o("a",{href:"https://github.com/eooce/Nav-Item",target:"_blank",class:"footer-link"},"Powered by eooce")],-1))])]),m.value?(l(),i("div",{key:2,class:"modal-overlay",onClick:t[4]||(t[4]=a=>m.value=!1)},[o("div",{class:"modal-content",onClick:t[3]||(t[3]=ee(()=>{},["stop"]))},[o("div",Te,[t[10]||(t[10]=o("h3",null,"友情链接",-1)),o("button",{onClick:t[2]||(t[2]=a=>m.value=!1),class:"close-btn"},t[9]||(t[9]=[o("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[o("path",{d:"M18 6L6 18M6 6l12 12"})],-1)]))]),o("div",Ue,[o("div",qe,[(l(!0),i($,null,I(k.value,a=>(l(),i("a",{key:a.id,href:a.url,target:"_blank",class:"friend-link-card"},[o("div",Fe,[a.logo?(l(),i("img",{key:0,src:a.logo,alt:a.title,onError:G},null,40,Ge)):(l(),i("div",Ve,x(a.title.charAt(0)),1))]),o("div",ze,[o("h4",null,x(a.title),1)])],8,Ae))),128))])])])])):L("",!0)])}}},Pe=E(He,[["__scopeId","data-v-bfcef9cf"]]);export{Pe as default};
